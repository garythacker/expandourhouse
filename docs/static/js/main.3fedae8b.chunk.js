(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{10:function(e,t,n){e.exports=n(19)},15:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(9),s=n.n(a),i=(n(15),n(1)),c=n(2),l=n(5),p=n(4),h=n(3),u=n(7),g=n.n(u),d=n(6),m=n.n(d),b=(r.Component,function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this.props.errors?this.props.errors:[];if(0===t.length)return null;if(1===t.length)e=t[0];else{for(var n=[],r=0;r<t.length;++r)n.push(o.a.createElement("li",{key:r},t[r]));e=o.a.createElement("ul",{className:"pl-0 mb-0"},n)}return o.a.createElement("div",{className:"alert alert-danger",role:"alert"},e)}}]),n}(r.Component));function k(e){if(e<0)throw"Ordinal got negative number";var t,n=["th","st","nd","rd","th","th","th","th","th","th"];return t=e%100===11||e%100===12||e%100===13?n[0]:n[e%10],"".concat(e).concat(t)}var v={1:"ckb5nedz71qeo1iplfagq7h8m",2:"ckb5nedz32zqh1ioby6d7omoc",3:"ckb5o7xpz32b11jnwfh8oa9w6",4:"ckb5o7zrf293h1imwjufnhxh7",5:"ckb5o7zi42zjz1imdtydav08h",6:"ckb5o7zt61rc21ip86kp3o1sk",7:"ckb5o7ykv1r791iplgkzk377w",8:"ckb5o7z1938cq1io7iz7t65bm",9:"ckb5o7zas38cr1io7uuxuo2ih",10:"ckb5o7ztd2zvc1iq9r3fvb3xo",11:"ckb5oixpf30uk1iok3rihvvsf",12:"ckb5oixey30631iq9t16m9xhd",13:"ckb5oixpp30641iq903zb03mc",14:"ckb5oix270wxd1imeb7rrrsp8",15:"ckb5oix941rmj1ip8ptuj01le",16:"ckb5oixde2zu71imd1f4en7hk",17:"ckb5oiws72zu61imdgbob2kvl",18:"ckb5oiyh51rnh1irm6hifr8j4",19:"ckb5oixti1rmk1ip8x964pl4n",20:"ckb5oiyk40r4j1iuv895fvly6",100:"ckb5qx7l70ak61io8n6q4dq5r"};m.a.accessToken="pk.eyJ1IjoiZHNoZWFyZXIiLCJhIjoiY2syam1qaThuMTEzazNsbnZxNHhidnZqcyJ9.Q0wOV0EePfEaRyw1oEK3UA";var f=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={congressStartYear:void 0,errors:[]},r.handleMapClick=r.handleMapClick.bind(Object(l.a)(r)),r}return Object(c.a)(n,[{key:"styleUrlForCongress",value:function(e){return"mapbox://styles/dshearer/"+v[""+e]}},{key:"loadMap",value:function(){console.log("Loading map: "+this.props.congress),this.props.congress&&(this.map?this.map.setStyle(this.styleUrlForCongress(this.props.congress)):(this.map=new m.a.Map({container:this.mapContainer,style:this.styleUrlForCongress(this.props.congress)}),this.map.on("click",this.handleMapClick)))}},{key:"componentDidMount",value:function(){m.a.clearStorage(),this.loadMap()}},{key:"componentWillUnmount",value:function(){this.map&&this.map.remove()}},{key:"componentDidUpdate",value:function(e){console.log(this.props),console.log("componentDidUpdate "+this.props.congress+" "+e.congress),this.props.congress!==e.congress&&this.loadMap()}},{key:"handleMapClick",value:function(e){var t=this.map.queryRenderedFeatures(e.point,{layers:["irreg-district-bg","reg-district-bg"]});if(console.log(t),0!==t.length){var n=t[0];console.log("feature:"),console.log(n);var r=n.properties.titleLong,o=n.properties.turnout;if(o){for(var a=n.geometry.coordinates.slice();Math.abs(e.lngLat.lng-a[0])>180;)a[0]+=e.lngLat.lng>a[0]?360:-360;var s="\n        <aside>\n            <header>\n            ".concat(r,'\n            </header>\n            <table>\n                <tr><th scope="row">Turnout</th><td>').concat(o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),"</td></tr>\n            </table>\n        </aside>\n        ");(new m.a.Popup).setLngLat(e.lngLat).setHTML(s).addTo(this.map)}}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(b,{errors:this.state.errors}),o.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",margin:"2em"}},o.a.createElement("figure",{style:{height:"600px",margin:0},ref:function(t){return e.mapContainer=t}},o.a.createElement("figcaption",{style:{textAlign:"center",marginBottom:"1em"}},k(this.props.congress)," Congress (",1789+2*(this.props.congress-1),")"))))}}]),n}(r.Component),y=(n(18),function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).sortedCongressNbrs=g.a.sortBy(g.a.keys(v).map((function(e){return parseInt(e)}))),r.state={congress:r.sortedCongressNbrs[0]},r.handleSelectCongress=r.handleSelectCongress.bind(Object(l.a)(r)),r}return Object(c.a)(n,[{key:"handleSelectCongress",value:function(e){var t=parseInt(e.target.value);this.setState({congress:t})}},{key:"render",value:function(){var e=this.sortedCongressNbrs.map((function(e){return o.a.createElement("option",{key:e,value:e},k(e)," Congress")})),t=o.a.createElement("select",{value:this.state.congress,onChange:this.handleSelectCongress},e,"}");return o.a.createElement("div",{className:"App"},t,o.a.createElement(f,{congress:this.state.congress}))}}]),n}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.3fedae8b.chunk.js.map