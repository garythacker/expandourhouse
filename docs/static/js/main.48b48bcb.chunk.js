(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{10:function(e,t,n){e.exports=n(19)},15:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(9),o=n.n(s),i=(n(15),n(1)),c=n(2),l=n(5),p=n(4),h=n(3),u=n(7),g=n.n(u),m=n(6),b=n.n(m),d=(r.Component,function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this.props.errors?this.props.errors:[];if(0===t.length)return null;if(1===t.length)e=t[0];else{for(var n=[],r=0;r<t.length;++r)n.push(a.a.createElement("li",{key:r},t[r]));e=a.a.createElement("ul",{className:"pl-0 mb-0"},n)}return a.a.createElement("div",{className:"alert alert-danger",role:"alert"},e)}}]),n}(r.Component));function f(e){if(e<0)throw"Ordinal got negative number";var t,n=["th","st","nd","rd","th","th","th","th","th","th"];return t=e%100===11||e%100===12||e%100===13?n[0]:n[e%10],"".concat(e).concat(t)}var k={1:"ckb1j8ym909hp1irt308gktqg",2:"ckb1j90a809ds1iqp5p7icjk5",3:"ckb1j92dl09fw1ilmujbc7u4p",4:"ckb1j94c609go1jtepq1pdtj9",5:"ckb1j96cp099n1iryslfa390l",6:"ckb1j97zu09fg1ipc8vxco2gq",7:"ckb1j6pbx09gh1imy1xeu5bsh",8:"ckb1j9b8609j21imyz66qe6ls",9:"ckb1j7we509fa1ins5yai2dj4",10:"ckb1lfj850bl81iti5waj252x",11:"ckb1lfibh0bfn1iryc3ol6le3",12:"ckb1lfik20bk71ilm6i1hsgx2",13:"ckb1lfikm07np1gmv1pql1rp0",14:"ckb1lfinn0bl51iob1se9spsg",15:"ckb1lfi070bjh1inteaouqkau",16:"ckb1lfivq0bhh1inrnkgcyzlt",17:"ckb1lfiwu0bm31ilidpff89g1",18:"ckb1lfhr90bk51ilmabj8do8t",19:"ckb1lfiba0bk61ilmnfwu820u",20:"ckb1lfhv50bma1insoiwig3yj"};b.a.accessToken="pk.eyJ1IjoiZHNoZWFyZXIiLCJhIjoiY2syam1qaThuMTEzazNsbnZxNHhidnZqcyJ9.Q0wOV0EePfEaRyw1oEK3UA";var v=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={congressStartYear:void 0,errors:[]},r.handleMapClick=r.handleMapClick.bind(Object(l.a)(r)),r}return Object(c.a)(n,[{key:"styleUrlForCongress",value:function(e){return"mapbox://styles/dshearer/"+k[""+e]}},{key:"loadMap",value:function(){console.log("Loading map: "+this.props.congress),this.props.congress&&(this.map?this.map.setStyle(this.styleUrlForCongress(this.props.congress)):(this.map=new b.a.Map({container:this.mapContainer,style:this.styleUrlForCongress(this.props.congress)}),this.map.on("click",this.handleMapClick)))}},{key:"componentDidMount",value:function(){b.a.clearStorage(),this.loadMap()}},{key:"componentWillUnmount",value:function(){this.map&&this.map.remove()}},{key:"componentDidUpdate",value:function(e){console.log(this.props),console.log("componentDidUpdate "+this.props.congress+" "+e.congress),this.props.congress!==e.congress&&this.loadMap()}},{key:"handleMapClick",value:function(e){var t=this.map.queryRenderedFeatures(e.point,{layers:["irreg-district-bg","reg-district-bg"]});if(console.log(t),0!==t.length){var n=t[0];console.log("feature:"),console.log(n);var r=n.properties.titleLong,a=n.properties.turnout;if(a){for(var s=n.geometry.coordinates.slice();Math.abs(e.lngLat.lng-s[0])>180;)s[0]+=e.lngLat.lng>s[0]?360:-360;var o="\n        <aside>\n            <header>\n            ".concat(r,'\n            </header>\n            <table>\n                <tr><th scope="row">Turnout</th><td>').concat(a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),"</td></tr>\n            </table>\n        </aside>\n        ");(new b.a.Popup).setLngLat(e.lngLat).setHTML(o).addTo(this.map)}}}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement(d,{errors:this.state.errors}),a.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",margin:"2em"}},a.a.createElement("figure",{style:{height:"600px",margin:0},ref:function(t){return e.mapContainer=t}},a.a.createElement("figcaption",{style:{textAlign:"center",marginBottom:"1em"}},f(this.props.congress)," Congress (",1789+2*(this.props.congress-1),")"))))}}]),n}(r.Component),y=(n(18),function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).sortedCongressNbrs=g.a.sortBy(g.a.keys(k).map((function(e){return parseInt(e)}))),r.state={congress:r.sortedCongressNbrs[0]},r.handleSelectCongress=r.handleSelectCongress.bind(Object(l.a)(r)),r}return Object(c.a)(n,[{key:"handleSelectCongress",value:function(e){var t=parseInt(e.target.value);this.setState({congress:t})}},{key:"render",value:function(){var e=this.sortedCongressNbrs.map((function(e){return a.a.createElement("option",{key:e,value:e},f(e)," Congress")})),t=a.a.createElement("select",{value:this.state.congress,onChange:this.handleSelectCongress},e,"}");return a.a.createElement("div",{className:"App"},t,a.a.createElement(v,{congress:this.state.congress}))}}]),n}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.48b48bcb.chunk.js.map